From 3af87af2759dc63738f50dda2482b809e2ba247f Mon Sep 17 00:00:00 2001
From: tastytea <tastytea@tastytea.de>
Date: Tue, 5 Jan 2021 00:16:38 +0100
Subject: [PATCH] Add compiler and linker flags.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Revert “built-in options” to “properties” for <meson-0.56 compatibility.
---
 build-win32.txt | 9 +++++----
 build-win64.txt | 9 +++++----
 2 files changed, 10 insertions(+), 8 deletions(-)

diff --git a/build-win32.txt b/build-win32.txt
index 2cb5cf0a..f2252c3e 100644
--- a/build-win32.txt
+++ b/build-win32.txt
@@ -4,11 +4,12 @@ cpp = 'i686-w64-mingw32-g++'
 ar = 'i686-w64-mingw32-ar'
 strip = 'i686-w64-mingw32-strip'
 
-[built-in options]
-c_link_args = ['-static', '-static-libgcc']
-cpp_link_args = ['-static', '-static-libgcc', '-static-libstdc++']
-
 [properties]
+c_args = @CFLAGS@
+cpp_args = @CXXFLAGS@
+c_link_args = @LDFLAGS@ + ['-static', '-static-libgcc']
+cpp_link_args = @LDFLAGS@ + ['-static', '-static-libgcc', '-static-libstdc++']
+
 needs_exe_wrapper = true
 
 [host_machine]
diff --git a/build-win64.txt b/build-win64.txt
index 1fad5ab7..6e9c7340 100644
--- a/build-win64.txt
+++ b/build-win64.txt
@@ -4,11 +4,12 @@ cpp = 'x86_64-w64-mingw32-g++'
 ar = 'x86_64-w64-mingw32-ar'
 strip = 'x86_64-w64-mingw32-strip'
 
-[built-in options]
-c_link_args = ['-static', '-static-libgcc']
-cpp_link_args = ['-static', '-static-libgcc', '-static-libstdc++']
-
 [properties]
+c_args = @CFLAGS@
+cpp_args = @CXXFLAGS@
+c_link_args = @LDFLAGS@ + ['-static', '-static-libgcc']
+cpp_link_args = @LDFLAGS@ + ['-static', '-static-libgcc', '-static-libstdc++']
+
 needs_exe_wrapper = true
 
 [host_machine]
-- 
2.26.2

